function BlogSearch(t){console.log;let e=function(t,e=document){return e.querySelectorAll(t)},i={haystack:t.haystack};function s(){t.resultEl.style.display="block"}i.init=function(){t.inputEl.addEventListener("blur",e=>(function(e){e.relatedTarget&&e.relatedTarget.classList.contains("search-hints")||(t.resultEl.style.display="none")})(e)),t.inputEl.addEventListener("focus",s),t.inputEl.addEventListener("keydown",()=>l.selectHints()),t.inputEl.addEventListener("input",t=>l.find(t.target.value))};let l={hints:[],pageId:"",keywords:[],match:function(t){if(this.find.idx=-1,t.trim().length<2)return[];var e=[],s=[];t=t.replace(/-|,|'/g,"");for(var l,n,r,d,a=0,h=1,c=1;a<i.haystack.length&&!(h>10);a++){titleOri=i.haystack[a].title;let o=i.haystack[a].link;(n=(l=titleOri.replace(/-|,|'/g,"")).toLowerCase().indexOf(t.toLowerCase()))>=0&&(d=0,null!==(r=titleOri.substr(n,t.length).match(/-|,|'/g))&&(d=r.length),l="<b>"+titleOri.substr(0,n)+"</b>"+titleOri.substr(n,t.length+d)+"<b>"+titleOri.substr(n+t.length+d)+"</b>",0===n?(e.push({index:i.haystack[a].index,ori:titleOri.replace(/'/g,"!!!"),title:l,link:o}),h++):(s.push({index:i.haystack[a].index,ori:titleOri.replace(/'/g,"!!!"),title:l,link:o}),c++))}if(h<10)for(a=0;a<c-1&&h<10;a++)e.push(s[a]),h++;return e},selectHints:function(){let t=e(".search-hints");if(0!==t.length)switch(event.keyCode){case 27:document.activeElement.blur();break;case 13:this.find.idx>-1?(event.preventDefault(),t[this.find.idx].click()):handleCommand();break;case 38:return event.preventDefault(),this.find.idx--,void(-2==this.find.idx?(this.find.idx=t.length-1,t[this.find.idx].classList.toggle("selected")):(t[this.find.idx+1].classList.toggle("selected"),this.find.idx>-1&&this.find.idx<t.length&&t[this.find.idx].classList.toggle("selected")));case 40:return this.find.idx++,void(this.find.idx==t.length?(this.find.idx=-1,t[t.length-1].classList.toggle("selected")):(t[this.find.idx].classList.toggle("selected"),this.find.idx>0&&this.find.idx<t.length&&t[this.find.idx-1].classList.toggle("selected")))}},highlightHints:function(){let t=Number(this.dataset.searchIndex);for(var i=e(".search-hints"),s=0;s<i.length;s++)s==t?i[s].classList.toggle("selected",!0):i[s].classList.toggle("selected",!1);l.find.idx=t},displayResult:function(i){t.resultEl.innerHTML="";for(let s of i){let i=t.resultTemplate.content.cloneNode(!0);e(".title",i)[0].innerHTML=s.title,e(".title",i)[0].href=s.link,t.resultEl.appendChild(i),0}},find:function(e){if(clearTimeout(this.wait),this.v=e,this.v.trim().length<2)t.resultEl.innerHTML="";else{var i=l.match(this.v.toLowerCase());this.keywords.indexOf(e)<0?(this.displayResult(i),this.keywords.push(e)):i.length>=0&&this.displayResult(i)}}};return i}function BlogFeeder(t){console.log;let e={posts:[]};return fetch("https://bukupujian2.blogspot.com/feeds/pages/default/3703839117892215893?alt=json").then(t=>t.json()).then(t=>{let i=t.entry.content.$t.split("|");for(let t=0;t<i.length-1;t++)e.posts.push({title:i[t],link:"https://bukupujian2.blogspot.com/20"+i[t+1]+".html"}),t++}),e}let feeder=BlogFeeder({blog:"bukupujian2",blogId:"3000166519687388789",entryId:"3703839117892215893"}),search=BlogSearch({inputEl:$("#input-search"),resultEl:$("#search-result"),resultTemplate:$("#tmp-hints"),haystack:feeder.posts});search.init();
