/* v0.0211 */
!function(){void 0===window.FretChart?window.FretChart=function(t="guitar"){let i,e;function s(t){1===t&&(e.shadowBlur=2,e.shadowColor="black",e.fillStyle=this.palette.nut,e.fillRect(this.x-this.fretMargin,this.y-3*this.scale,(this.stringNumber-1)*this.stringPadding+2*this.fretMargin,3*this.scale),e.shadowBlur=0)}function h(t){this.capo>0&&this.capo===t&&(e.shadowBlur=2,e.shadowColor="black",e.fillStyle="#222222",e.fillRect(this.x-2*this.fretMargin,this.y-3*this.scale,(this.stringNumber-1)*this.stringPadding+2*this.fretMargin*2,3*this.scale),e.shadowBlur=0)}function n(){e.beginPath(),e.lineWidth="guitar"==t?2*this.scale:2.5*this.scale;for(let i=0;i<this.stringNumber;i++)"guitar"==t&&i>=4&&(e.stroke(),e.beginPath()),e.strokeStyle="guitar"==t&&i>=4?this.palette.string12Shadow:this.palette.stringShadow,e.moveTo(this.x+i*this.stringPadding,this.y),e.lineTo(this.x+i*this.stringPadding,this.y+this.fretLength*this.fretPadding);e.stroke(),e.lineWidth="guitar"==t?1*this.scale:1.5*this.scale;for(let i=0;i<this.stringNumber;i++)"guitar"==t&&i>=4&&(e.stroke(),e.beginPath()),e.strokeStyle="guitar"==t&&i>=4?this.palette.string12:this.palette.string,e.moveTo(this.x+i*this.stringPadding,this.y),e.lineTo(this.x+i*this.stringPadding,this.y+this.fretLength*this.fretPadding);e.stroke()}function r(){e.beginPath(),e.strokeStyle=this.palette.fretShadow,e.lineWidth=2*this.scale;for(let t=0;t<=this.fretLength;t++)e.moveTo(this.x-this.fretMargin,this.y+t*this.fretPadding),e.lineTo(this.x+(this.stringNumber-1)*this.stringPadding+this.fretMargin,this.y+t*this.fretPadding);e.stroke(),e.strokeStyle=this.palette.fret,e.lineWidth=1*this.scale;for(let t=0;t<=this.fretLength;t++)e.moveTo(this.x-this.fretMargin,this.y+t*this.fretPadding),e.lineTo(this.x+(this.stringNumber-1)*this.stringPadding+this.fretMargin,this.y+t*this.fretPadding);e.stroke()}function a(t){switch(t){case"a":t=10;break;case"b":t=11;break;case"c":t=12}return t}function l(t){let i=[];for(let e of t)"x"!=(e=a(e))&&"0"!=e&&i.push(parseInt(e));if(0===i.length)return 1;let e=Math.min(...i),s=Math.max(...i);return s<=this.fretLength?1:e==s?e<4?1:e-1:e>2?s-e<=2?e-1:e:s-e>=3?e:1}function f(t,i,s){e.fillStyle=this.palette.fretMarker,e.beginPath(),e.arc(t,i,s,0,2*Math.PI),e.fill()}function d(t){e.font=8*this.scale+"px monospace";let i=2*this.scale;for(let s=t,h=0;s<t+this.fretLength;s++,h++){let n=this.y+h*this.fretPadding+this.fretPadding/2;[3,5,7,9].includes(s)?f(this.x+(this.stringNumber-1)*this.stringPadding/2,n,i):12==s&&(f(this.x+(this.stringNumber-3)*this.stringPadding/2,n,i),f(this.x+(this.stringNumber+1)*this.stringPadding/2,n,i)),(t>1||this.fretLength>4)&&(e.fillStyle=this.palette.fretNum,x=this.x+(this.stringNumber-1)*this.stringPadding+this.stringPadding/1.5,n=this.y+h*this.fretPadding+this.fretPadding/1.6,e.fillText(s,x,n))}}function g(i,s,h,n,r){for(e.beginPath(),1===(i=i.split(",")).length&&(i=i[0].split(""));i.length<6;)i.push("x");s=s.split(""),i.map(function(t,i){"0"!=t&&"x"!=t||"0"==s[i]||s.splice(i,0," ")}),s.length>6&&s.splice(6,s.length-6);let l,f,d,g=h.match(/1/g),o=h.match(/3/g),c=!1,u=1;if(null!==g&&g.length>1){c=!0,l=-1,f=-1;for(let t=0;t<s.length;t++)if("1"==s[t]){l=t;break}for(let t=s.length;t>0;t--)if("1"==s[t]){f=t;break}d=f-l}else if(null!==o&&o.length>1){u=3,c=!0,l=-1,f=-1;for(let t=0;t<s.length;t++)if("3"==s[t]){l=t;break}for(let t=s.length;t>0;t--)if("3"==s[t]){f=t;break}d=f-l}for(let n,g=0,o=!1;n=i[g],g<i.length;g++)if("guitar"==t&&(h=s[g]),"guitar"!=t||" "!=n&&"x"!=n&&"0"!=n){if((n=a(n))>=r){let i=this.y+(n-(r-1))*this.fretPadding-this.fretPadding/2;if(c&&h==u&&!1===o){o=!0;let t=this.x+l*this.stringPadding;e.beginPath(),e.strokeStyle=this.palette.circle,e.shadowBlur=2,e.shadowColor="black",e.lineWidth=this.stringPadding/2.2*2,e.lineCap="round",e.moveTo(t,i),e.lineTo(t+d*this.stringPadding,i),e.stroke(),e.shadowBlur=0,e.lineWidth=1;let s=this.stringPadding*(l+1)+(this.stringPadding*(f+1)-this.stringPadding*l)/2-this.stringPadding/2.5;e.font=10*this.scale+"px monospace",e.fillStyle=this.palette.circleText,e.fillText(h,s,i+this.stringPadding/5.2)}else{if(h==u&&o)continue;let s="guitar"==t?this.stringPadding/2.2:this.stringPadding/2.7;if(e.shadowBlur=2,e.shadowColor="black",e.beginPath(),e.arc(this.x+g*this.stringPadding,i,s,0,2*Math.PI),e.fillStyle=this.palette.circle,e.fill(),e.shadowBlur=0,void 0!==h){let s="guitar"==t?10:h.length>1?7:8;e.font=s*this.scale+"px monospace";let n=e.measureText(h).width/2,r=h.length>1?n/2:n,a=this.x+g*this.stringPadding-n,l=i+r;e.fillStyle=this.palette.circleText,e.fillText(h,a,l)}}}}else e.font=10*this.scale+"px monospace",e.fillStyle=this.palette.open,"0"==n&&(n="o"),e.fillText(n,this.x+g*this.stringPadding-3*this.scale,this.y-5*this.scale-this.fretPadding/10)}function o({fret:t,finger:s,name:h}){P(),this.padding=20*this.scale,this.stringPadding=15*this.scale,this.fretPadding=23*this.scale,this.fretMargin=4*this.scale,this.x=this.padding,this.y=this.padding+this.padding/5,(i=document.createElement("canvas")).width=(this.stringNumber+2)*this.stringPadding,i.height=this.fretLength*this.fretPadding+55*this.scale,i.dataset.fret=t,i.dataset.finger=s,i.dataset.name=h,e=i.getContext("2d")}function c(){if("guitar"!=t)for(let t=0;t<this.stringNumber;t++){e.font=10*this.scale+"px monospace",e.fillStyle=this.palette.open;let i="EADGBE";e.fillText(i[t],this.x+t*this.stringPadding-3*this.scale,this.y-5*this.scale-this.fretPadding/10)}}function u(){e.fillStyle=this.palette.fretboard,e.fillRect(this.x-this.fretMargin,this.y,this.stringPadding*(this.stringNumber-1)+2*this.fretMargin,this.fretPadding*this.fretLength)}function p(i){if("guitar"!=t)return;e.beginPath(),i.indexOf("*")>0&&(e.fillStyle=this.palette.special1,e.fillRect(this.x+6*this.stringPadding-5,this.y+4*this.fretPadding+5,5,5),i.indexOf("**")>0&&(e.fillStyle=this.palette.special2,e.fillRect(7*this.stringPadding-5,this.y+4*this.fretPadding+10,5,5)),i=i.replace(/\*+/,"")),e.fillStyle=this.palette.name,e.font=this.fontSize*this.scale+"px "+this.fontFamily;let s=e.measureText(i).width;e.fillText(i,this.x+((this.stringNumber-1)*this.stringPadding-s)/2,this.y+(this.fretLength+1)*this.fretPadding+(this.top+Math.max(0,this.fontHeight-(this.y+5))))}function P(){let t=document.getElementById("guichart");t||((t=document.createElement("div")).style.height="100px",t.style.opacity="0",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.zIndex="-8177",t.style.overflow="hidden",t.setAttribute("id","guichart"),document.body.appendChild(t)),t.innerHTML="";let i=document.createElement("div");i.textContent="Guichart",t.appendChild(i),this.fontFamily=window.getComputedStyle(i).fontFamily,this.fontSize=window.getComputedStyle(i).fontSize.replace("px",""),this.fontWeight=window.getComputedStyle(i).fontWeight,this.fontHeight=i.offsetHeight,this.top=window.getComputedStyle(i).top.replace("px",""),this.top="auto"==this.top?0:Number(this.top)}this.capo=0,this.scale=1,this.fretLength=4,this.isLandscape=!1,this.stringNumber="guitar"==t?6:4,this.palette="guitar"==t?{fretboard:"#231818",fretMarker:"#c4c2c2",finger:"#ffffff",open:"#000000",nut:"#baae8f",special1:"#1e90ff",special2:"#ee82ee",fretNum:"#000000",fret:"#9f9d9d",fretShadow:"#564b4b",string:"#be907a",stringShadow:"#232020",string12:"#c0c0c0",string12Shadow:"#000",name:"#000000",circle:"#b73b3b",circleText:"#ffffff"}:{fretboard:"burlywood",fretMarker:"#333",finger:"#ffffff",open:"#ffffff",nut:"#2d2a28",special1:"#1e90ff",special2:"#ee82ee",fretNum:"#ffffff",fret:"#aaa",fretShadow:"#907f76",string:"#eee",stringShadow:"#777",name:"#000000",circle:"#7c2727",circleText:"#ffffff"},c=c.bind(this),u=u.bind(this),P=P.bind(this),p=p.bind(this),s=s.bind(this),h=h.bind(this),r=r.bind(this),f=f.bind(this),d=d.bind(this),n=n.bind(this),o=o.bind(this),g=g.bind(this),l=l.bind(this),this.setPalette=function(t){for(let i in t)this.palette[i]=t[i]},this.getPalette=function(){return JSON.parse(JSON.stringify(this.palette))},this.formula=function({fret:t="xxxxxx",finger:e="      ",name:a=" "}={}){this.fretLength<4&&(this.fretLength=4),o({fret:t,finger:e,name:a});let f=l(t);return this.isOverlap||(c(),u(),r(),s(f),h(f),n(),d(f),p(a)),g(t,e,e,t,f),i}}:console.error("fretchart.js","Failed to initialize. Duplicate variable exists.")}();
